{"result":"This JavaScript function checks if a number is prime. If it's not prime, it returns an array of all its factors. The function returns an object with two properties: `isPrime` (a boolean) and `factors` (an array).\n\n```javascript\n/**\n * Checks if a number is prime and returns its factors if it's not.\n *\n * @param {number} num The number to check. Must be a non-negative integer.\n * @returns {object} An object with `isPrime` (boolean) and `factors` (array of numbers).\n *                   If num is prime, factors will be [1, num].\n *                   If num is not prime, factors will include all its divisors in ascending order.\n * @throws {Error} If the input is not a non-negative integer.\n */\nfunction isPrimeAndFactors(num) {\n    // 1. Input Validation\n    if (typeof num !== 'number' || !Number.isInteger(num) || num < 0) {\n        throw new Error(\"Input must be a non-negative integer.\");\n    }\n\n    // 2. Handle Edge Cases\n    if (num <= 1) {\n        // Numbers less than or equal to 1 are not prime.\n        // Conventionally, 1's only factor is 1.\n        return { isPrime: false, factors: [1] };\n    }\n    if (num === 2) {\n        // 2 is the only even prime number.\n        return { isPrime: true, factors: [1, 2] };\n    }\n\n    // 3. Initialize factors and prime flag\n    // Using a Set to automatically handle duplicate factors (e.g., for perfect squares like 9, where 3 is a factor and 9/3 is also 3).\n    const factors = new Set([1, num]);\n    let isPrimeFlag = true; // Assume prime until a divisor is found\n\n    // 4. Check for even numbers (optimization: all other even numbers are not prime)\n    if (num % 2 === 0) {\n        isPrimeFlag = false;\n        factors.add(2);\n        factors.add(num / 2); // Add the corresponding factor\n    }\n\n    // 5. Check for odd divisors\n    // We only need to check divisors up to the square root of num.\n    // If a number has a divisor greater than its square root, it must also have one smaller than its square root.\n    // Start from 3 and increment by 2 (checking only odd numbers).\n    const limit = Math.sqrt(num);\n    for (let i = 3; i <= limit; i += 2) {\n        if (num % i === 0) {\n            isPrimeFlag = false;\n            factors.add(i);\n            factors.add(num / i); // Add the corresponding factor\n        }\n    }\n\n    // 6. Convert factors Set to an Array and sort it\n    const sortedFactors = Array.from(factors).sort((a, b) => a - b);\n\n    // 7. Return the result object\n    return {\n        isPrime: isPrimeFlag,\n        factors: sortedFactors\n    };\n}\n\n// --- Examples ---\n\nconsole.log(\"isPrimeAndFactors(0):\", isPrimeAndFactors(0)); // { isPrime: false, factors: [1] }\nconsole.log(\"isPrimeAndFactors(1):\", isPrimeAndFactors(1)); // { isPrime: false, factors: [1] }\nconsole.log(\"isPrimeAndFactors(2):\", isPrimeAndFactors(2)); // { isPrime: true, factors: [1, 2] }\nconsole.log(\"isPrimeAndFactors(7):\", isPrimeAndFactors(7)); // { isPrime: true, factors: [1, 7] }\nconsole.log(\"isPrimeAndFactors(12):\", isPrimeAndFactors(12)); // { isPrime: false, factors: [1, 2, 3, 4, 6, 12] }\nconsole.log(\"isPrimeAndFactors(25):\", isPrimeAndFactors(25)); // { isPrime: false, factors: [1, 5, 25] }\nconsole.log(\"isPrimeAndFactors(29):\", isPrimeAndFactors(29)); // { isPrime: true, factors: [1, 29] }\nconsole.log(\"isPrimeAndFactors(99):\", isPrimeAndFactors(99)); // { isPrime: false, factors: [1, 3, 9, 11, 33, 99] }\nconsole.log(\"isPrimeAndFactors(100):\", isPrimeAndFactors(100)); // { isPrime: false, factors: [1, 2, 4, 5, 10, 20, 25, 50, 100] }\n\n// Example with invalid input\ntry {\n    isPrimeAndFactors(-5);\n} catch (error) {\n    console.error(error.message); // Input must be a non-negative integer.\n}\n\ntry {\n    isPrimeAndFactors(3.14);\n} catch (error) {\n    console.error(error.message); // Input must be a non-negative integer.\n}\n\ntry {\n    isPrimeAndFactors(\"abc\");\n} catch (error) {\n    console.error(error.message); // Input must be a non-negative integer.\n}\n```\n\n### Explanation:\n\n1.  **Input Validation:** The function first checks if the input `num` is a valid non-negative integer. If not, it throws an `Error`.\n2.  **Edge Cases (0, 1, 2):**\n    *   Numbers `0` and `1` are not considered prime. `1` is conventionally its only factor.\n    *   `2` is the smallest and only even prime number. It's handled separately for efficiency.\n3.  **Initialization:**\n    *   `factors`: A `Set` is used to store factors. Sets automatically handle unique values, which is useful when `i` and `num / i` are the same (e.g., for `num = 9`, `i = 3`, then `num / i = 3`). It's initialized with `1` and `num` because these are always factors.\n    *   `isPrimeFlag`: A boolean flag, initially set to `true`, which will be changed to `false` if any divisor (other than 1 and `num` itself) is found.\n4.  **Optimization for Even Numbers:**\n    *   If `num` is even and greater than 2, it cannot be prime. `isPrimeFlag` is set to `false`, and `2` and `num / 2` are added to the factors. This avoids checking `2` in the main loop.\n5.  **Main Loop for Divisors:**\n    *   The loop iterates from `i = 3` up to `Math.sqrt(num)`.\n        *   We only need to check up to the square root because if `num` has a factor `d` greater than `sqrt(num)`, then `num / d` must be a factor smaller than `sqrt(num)` that would have already been found.\n        *   The loop increments `i` by `2` (`i += 2`) because we've already handled `2` and all other even numbers. So, we only need to check odd potential divisors.\n    *   If `num` is divisible by `i` (`num % i === 0`):\n        *   `isPrimeFlag` is set to `false`.\n        *   `i` is added to the `factors` set.\n        *   `num / i` (its corresponding pair factor) is also added to the `factors` set.\n6.  **Result:**\n    *   The `factors` `Set` is converted to an `Array` and sorted in ascending order.\n    *   The function returns an object containing the final `isPrimeFlag` and the `sortedFactors` array."}